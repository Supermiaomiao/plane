(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(n(36)),r=v(n(6)),s=n(27),o=n(149),a=n(33),u=v(n(822)),l=v(n(1126)),d=v(n(1125)),c=v(n(823)),h=v(n(1984)),f=v(n(50)),p=v(n(285)),m=v(n(1127)),g=v(n(35));function v(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.View.extend({template:"commit-form-template",events:{"keyup #id_path":"checkPath","click #id_create-pullrequest":"createPullRequestHandler","focusout #id_branch-name":"slugifyBranchName","click .create-pull-request-link":"createPullRequest","submit .commit-form":"commitChanges","click .commit-button":"commitChanges","click .cancel-link":"hide"},initialize:function(e){(0,s.bindAll)(this,"createPullRequestHandler","slugifyBranchName","createPullRequest","commitChanges","hide","updateCreatePRCheckbox");var t=new p.default({width:700,height:"auto",id:"commit-form"}),n=(0,r.default)(g.default.toHtml(this.template,{}));t.addHeader(n.attr("data-title")),t.addPanel("main","","commit-form-body"),t.addButton(n.attr("data-cta-label"),null,"commit-button"),t.addLink(n.attr("data-cancel-label"),null,"cancel-link"),this.dialog=t,this.setElement(t.popup.element[0]),this.$commitFormBody=this.$(".commit-form-body"),this.$cancelLinkTemplate=this.$(".cancel-link").clone(),this.$cancelPlaceholderTemplate=(0,r.default)('<span class="cancel-placeholder" />').text(this.$cancelLinkTemplate.text()),this.originalRepository=e.repository,this.destinationRepository=e.destinationRepository,this.localID=e.localID,this.isDelete=e.isDelete,this.isCreate=e.isCreate,this.isRename=e.isRename,this.isWriter=e.isWriter,this.hasPushAccess=e.hasPushAccess,this.isPullRequest=e.isPullRequest,this.hideCreatePullRequest=e.hideCreatePullRequest,this.originalHash=e.hash,this.originalBranch=e.branch,this.originalPath=e.path,this.sourceUrl=e.sourceUrl,this.redirectUrl=e.redirectUrl,this.state=new i.default.Model,this.state.on("change:createPullRequest",this.updateCreatePRCheckbox)},render:function(){var e={owner:this.originalRepository.get("owner").get("username"),slug:this.originalRepository.get("slug"),path:this.originalPath,filename:this.originalPath.split("/").pop(),isCreate:this.isCreate,isDelete:this.isDelete,isRename:this.isRename,isWriter:this.isWriter,hasPushAccess:this.hasPushAccess,isPullRequest:this.isPullRequest,hideCreatePullRequest:this.hideCreatePullRequest};this.$commitFormBody.html(g.default.toHtml(this.template,e)),this.$error=this.$(".aui-message.error"),this.$info=this.$(".aui-message.info"),this.$path=this.$("#id_path"),this.$prFields=this.$("#pr-fields"),this.$commitButton=this.$(".commit-button");var t=this.$(".commit-form");return this.defaultMessage=t.attr("data-default-message"),this.forkError=t.attr("data-fork-error"),this.commitError=t.attr("data-commit-error"),this.pullRequestError=t.attr("data-pull-request-error"),this.updateError=t.attr("data-update-error"),this.branchConflictError=t.attr("data-branch-conflict-error"),this.forkingMessage=t.attr("data-forking-message"),this.committingMessage=t.attr("data-committing-message"),this.mergingMessage=t.attr("data-merging-message"),this.creatingPRMessage=t.attr("data-creating-pr-message"),this.updatingPRMessage=t.attr("data-updating-pr-message"),this.$commitButton.addClass("aui-button"),this.$("#id_message").val(this.defaultMessage),this.$message||((0,r.default)('<div class="message" />').prependTo(this.$(".dialog-button-panel")),this.$message=this.$(".dialog-button-panel").find(".message")),this.state.set({autocompleteInitialized:!1,createPullRequest:!this.isWriter||!this.hasPushAccess}),this.updateCreatePRCheckbox(this.state,this.state.get("createPullRequest")),(0,a.publishScreenEvent)("commitFileModal"),this},getPath:function(){return this.$path.val()&&this.$path.val().trim()||this.originalPath},getMessage:function(){return this.$("#id_message").val()||this.defaultMessage},getCommit:function(){var e=new l.default({repository:this.originalRepository,parents:this.originalHash?[this.originalHash]:null,branch:new u.default({repository:this.originalRepository,name:this.originalBranch})});if(this.isRename){e.addFile({path:this.originalPath,content:null});var t={path:this.getPath(),content:this.content};this.encoding&&(t.encoding=this.encoding),e.addFile(t)}else e.addFile({path:this.originalPath,content:this.content});return e},getPullRequest:function(){var e=this.getMessage(),t=this.commit.get("repository").id===this.originalRepository.id;return new d.default({source:new c.default({repository:this.commit.get("repository"),branch:this.commit.get("branch")}),destination:new c.default({repository:this.originalRepository,branch:new u.default({repository:this.originalRepository,name:this.originalBranch})}),title:e.split("\n")[0],description:e,close_source_branch:t})},setContent:function(e,t){return this.content=e,this.encoding=t,this},generateBranchName:function(){return"{}/{}".format(f.default.displayName.replace(/[^\w]/g,"-").substring(0,40),this.getMessage().replace(/[^\w\s]/g,"").substring(0,40).replace(/\s+/g,"-").toLowerCase()+"-"+Date.now())},slugify:function(e){return e.replace(/[^\w\s/-]/g,"").replace(/\s+/g,"-")},slugifyBranchName:function(e){var t=(0,r.default)(e.target);t.val(this.slugify(t.val()))},getRedirectLink:function(e){if(this.isCreate&&"bitbucket-pipelines.yml"===this.getPath())return"/"+this.originalRepository.id+"/addon/pipelines/home";if(this.isCreate&&"README.md"===this.getPath())return"/"+this.originalRepository.id+"/src";if(this.redirectUrl){var t=(0,o.parse)(this.redirectUrl),n=t.protocol,i=t.host;if(!n&&!i)return this.redirectUrl}return e.html.href},redirect:function(e){(0,r.default)(window).off(".editor"),window.location=this.getRedirectLink(e)},commit:function(){var e=this.getCommit(),t=function(){this.isWriter?this.saveCommit(e):this.forkAndCommit(e)}.bind(this);if(this.disable(),e.set({message:this.getMessage()}),e.set({sourceSuffix:this.getSourceSuffix()}),this.state.get("createPullRequest")){var n=this.$("#id_branch-name").val();e.setBranch(n||this.generateBranchName()),e.get("branch").fetch().fail(t.bind(this)).done(function(){this.enable().showError(this.branchConflictError)}.bind(this))}else t()},saveCommit:function(e){this.showMessage(this.committingMessage),e.save(null,{success:function(t,n,i){this.commit=e,this.state.get("createPullRequest")?this.createPullRequest():this.isPullRequest?this.updatePullRequest():this.redirect(e.get("links"))}.bind(this),error:function(t,n,i){this.state.get("createPullRequest")||409!==n.status?400===n.status?this.showError(n.responseText).enable():this.showError(this.commitError).enable():this.branchAndMerge(e)}.bind(this)})},updatePullRequest:function(){this.showMessage(this.updatingPRMessage);var e=this.getPullRequest();e.set({local_id:this.localID}),e.get("destination").set({repository:this.destinationRepository}),e.updateRef().done((function(e){(0,r.default)(window).off(".editor"),window.location=e})).fail(function(){this.hide(),this.showError(this.updateError)}.bind(this))},forkAndCommit:function(e){this.showMessage(this.forkingMessage),this.originalRepository.fork().done(function(t){e.set({repository:t}),this.saveCommit(e)}.bind(this)).fail(function(){this.showError(this.forkError).enable()}.bind(this))},branchAndMerge:function(e){this.showMessage(this.mergingMessage),e.setBranch(this.generateBranchName()).save(null,{success:function(t,n,i){this.commit=e;var r={hash:e.get("hash").slice(0,13),branch:this.originalBranch,message:e.get("message")},s=g.default.toHtml("merge-message-template",r);this.commit.merge(this.originalBranch,s).done(function(e){this.isPullRequest?this.updatePullRequest():this.redirect(e.links)}.bind(this)).fail(function(){this.showError(new h.default({repository:this.originalRepository,commit:this.commit,path:this.originalPath}).render().$el.html()),this.$commitButton.removeClass("loading")}.bind(this))}.bind(this),error:function(e,t,n){this.showError(this.commitError).enable()}.bind(this)})},getSourceSuffix:function(){return this.isPullRequest?"PullRequestFileScreen":"FileSourceScreen"},createPullRequest:function(e){e&&(e.preventDefault(),this.enable(),this.$("#id_create-pullrequest").prop("checked",!0),this.disable()),this.showMessage(this.creatingPRMessage);var t=this.getPullRequest(),n=this.$("#reviewers").val();n&&n.trim()&&t.set({reviewers:n.trim().split(",")}),t.save(null,{success:function(e,t,n){this.redirect(e.get("links"))}.bind(this),error:function(e,t,n){this.showError(this.pullRequestError).enable()}.bind(this)})},disable:function(e){return this.disabled=!0,this.$commitButton.addClass("loading"),e?this.$commitButton.attr({disabled:"disabled","aria-disabled":!0}):(this.$(":input").attr({disabled:"disabled","aria-disabled":!0}),this.$(".cancel-link").replaceWith(this.$cancelPlaceholderTemplate.clone())),this},enable:function(){return this.disabled=!1,this.$commitButton.removeClass("loading"),this.$(":input").removeAttr("disabled aria-disabled"),this.$(".cancel-placeholder").replaceWith(this.$cancelLinkTemplate.clone()),this},showError:function(e){return this.hideMessage().$error.removeClass("hidden").find(".message").html(e),this},hideError:function(){return this.$error.addClass("hidden"),this},showMessage:function(e){return this.$message.stop().fadeOut(200,function(){this.$message.html("{}&hellip;".format(e)),this.$message.fadeIn(200)}.bind(this)),this},hideMessage:function(){return this.$message.stop().hide(),this},updateCreatePRCheckbox:function(e,t){this.$("#id_create-pullrequest").prop("checked",t),this.$prFields&&this.$prFields.length&&(t?(this.$prFields.slideDown(200).find("#id_branch-name").val(this.generateBranchName()),this.isPullRequest||this.state.get("autocompleteInitialized")||(0,s.defer)(function(){(0,m.default)(this.$("#reviewers-group")),this.state.set({autocompleteInitialized:!0})}.bind(this))):this.$prFields.slideUp(200))},createPullRequestHandler:function(e){this.state.set({createPullRequest:(0,r.default)(e.target).is(":checked")})},commitChanges:function(e){e&&e.preventDefault(),this.disabled||this.commit()},show:function(e){e&&e.preventDefault(),this.render().checkPath(),this.dialog.show()},hide:function(e){e&&e.preventDefault(),this.dialog.hide()},checkPath:(0,s.debounce)((function(e){if(this.isRename){this.$("#path-error").remove(),this.disable(!0);var t=this.$path.val().trim();if(t!==this.originalPath){if(""===t)return(0,r.default)('<span class="error" id="path-error">You must specify a path.</span>').insertAfter(this.$path),void this.$commitButton.removeClass("loading");var n=this.sourceUrl.slice(0,this.sourceUrl.lastIndexOf("/")+1);r.default.get(n+t).always(function(e,t){"success"===t?((0,r.default)('<span class="error" id="path-error">A file with this name already exists.</span>').insertAfter(this.$path),this.$commitButton.removeClass("loading")):this.enable()}.bind(this))}else this.$commitButton.removeClass("loading")}}),100)}),e.exports=t.default},1983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(6),s=(i=r)&&i.__esModule?i:{default:i};n(24),t.default={mask:function(e,t){this.unmask(e);var n=(0,s.default)('<div class="plain-mask"></div>');e.append(n),t&&(t.backgroundColor&&n.css("background-color",t.backgroundColor),t.spinner&&n.spin(t.spinner))},unmask:function(e){e.find(".plain-mask").spin(!1).remove()},spinnerSizes:{SMALL:"small",MEDIUM:"medium",LARGE:"large"}},e.exports=t.default},1984:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(36)),r=o(n(20)),s=o(n(35));function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.View.extend({template:"commit-merge-error-template",initialize:function(e){r.default.bindAll(this,"render"),this.repository=e.repository,this.commit=e.commit,this.path=e.path},render:function(){var e={owner:this.repository.get("owner").get("username"),slug:this.repository.get("slug"),hash:this.commit.get("hash"),path:this.path,branch:this.commit.get("branch").get("name"),encodedBranch:encodeURIComponent(this.commit.get("branch").get("name"))};return this.$el.html(s.default.toHtml(this.template,e)),this}}),e.exports=t.default},2039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(36)),r=u(n(5477)),s=u(n(6)),o=u(n(27)),a=u(n(7310));function u(e){return e&&e.__esModule?e:{default:e}}var l=i.default.Model.extend({mutableAttrs:["title","is_private","scm"],defaults:function(){return{files:new a.default,scm:"git",is_private:!0}},validate:function(){var e=this.get("files");return this.get("owner")?e.isValid()?void 0:e.validationError:gettext("Select a profile in which to create the snippet")},url:function(){return"/!api/2.0/snippets/{workspaceId}/{id}".format({workspaceId:this.get("workspace_id")||this.get("owner").workspace_id,id:this.id})},parse:function(e){var t,n=o.default.clone(e);return t=o.default.map(e.files,(function(e,t){var n=o.default.clone(e);return n.path=t,n})),"team"===e.owner.type&&(n.owner.is_team=!0),n.files=new a.default(t,{parse:!0}),n},toFormData:function(){var e=this.get("files").toFormData();return this.mutableAttrs.forEach(function(t){var n=this.get(t);null!=n&&e.append(t,n.toString())}.bind(this)),e},size:function(){return o.default.sum(this.get("files").pluck("size"))},save:function(){var e,t,n=this;return!!this.isValid()&&(t=this.isNew()?"POST":"PUT",e=s.default.ajax({type:t,url:this.url(),data:this.toFormData(),contentType:!1,processData:!1}).done((function(e){n.trigger("sync",n,e)})).fail((function(e,t,i){n.trigger("error",n,i)})),n.trigger("request",n,e),e)},addFile:function(e){var t=this.get("files");e||(e={}),(e.size||e.get&&e.get("size"))+this.size()>l.MAX_SIZE?this.trigger("invalid:size",e):(!t.isEmpty()&&t.last().isEmpty()&&t.pop(),t.push(e))}});l.MAX_SIZE=(0,r.default)("10mb"),t.default=l,e.exports=t.default},2057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(n(24)),r=p(n(5477)),s=p(n(140)),o=p(n(6)),a=p(n(53)),u=p(n(7315)),l=p(n(7316)),d=p(n(7324)),c=p(n(2039)),h=p(n(7325)),f=p(n(393));function p(e){return e&&e.__esModule?e:{default:e}}n(67);var m=(0,s.default)("bb:snippets");t.default=a.default.ItemView.extend({template:!1,behaviors:{disablesOnModelSave:{behaviorClass:u.default}},modelEvents:{"invalid:size":"onSizeTooLarge"},ui:{title:".snippet-title",owner:".snippets-owner-input",scm:'input[name="scm"]',editors:".snippets-file-editors",permissions:".snippets-permissions",newFileButton:".snippets-new-file",submitButton:".snippets-submit-button"},events:{"change @ui.title":"updateTitle","click @ui.newFileButton":"addNewFile","change @ui.scm":"updateSCM","change @ui.owner":"updateOwner",submit:"submit"},initialize:function(){this.model.isNew()&&this.model.addFile(),this.editors=new h.default({collection:this.model.get("files")}),this.permissions=new d.default({model:this.model}).render()},onRender:function(){this.auifySelects(),this.ui.editors.html(this.editors.render().$el),this.ui.permissions.html(this.permissions.render().$el),new l.default({el:this.el}).on("add:file",function(e){this.closeMessage(),this.model.addFile(e)}.bind(this))},updateOwner:function(e){this.model.set("owner",(0,o.default)(e.target).find(":selected").data("user"))},updateTitle:function(e){this.model.set("title",(0,o.default)(e.target).val())},updateSCM:function(e){this.model.set("scm",(0,o.default)(e.target).val())},addNewFile:function(){this.model.addFile()},auifySelects:function(){this.ui.owner.auiSelect2({formatResult:f.default,formatSelection:f.default,dropdownAutoWidth:!0,minimumResultsForSearch:-1})},setErrorMessage:function(e){this.errorMessage=i.default.messages.error({title:gettext("Error saving snippet"),body:"<p>{}</p>".format(e)})},closeMessage:function(){this.errorMessage&&this.errorMessage.closeMessage()},onSizeTooLarge:function(e){var t=interpolate(gettext("Your snippet exceeds the %s size limit. Try deleting some files,\n        uploading a smaller file, or creating a new snippet."),[(0,r.default)(c.default.MAX_SIZE)]);this.closeMessage(),this.errorMessage=i.default.messages.error({title:gettext("Snippet exceeds max size"),body:"<p>{}</p>".format(t)})},submit:function(e){e.preventDefault();var t=this;this.closeMessage();var n=this.model.save();n?(n.done((function(e){window.location.href=e.links.html.href})).fail((function(e){var n,i;try{n=JSON.parse(e.responseText)}catch(e){m("error in Snippet#submit:",e)}i=n&&n.error&&n.error.message?n.error.message:gettext("Something went wrong. Please try again."),t.setErrorMessage(i)})),this.ui.submitButton.loading(n,{restore:!1})):this.setErrorMessage(this.model.validationError)}}),e.exports=t.default},4539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4601),s=(i=r)&&i.__esModule?i:{default:i};t.default=s.default.modeInfo,e.exports=t.default},4541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(24)),r=g(n(36)),s=g(n(6)),o=g(n(53)),a=g(n(20)),u=g(n(388)),l=n(27),d=g(n(391)),c=g(n(83)),h=g(n(339)),f=g(n(1113)),p=g(n(81)),m=g(n(54));function g(e){return e&&e.__esModule?e:{default:e}}var v={"text/x-markdown":"markdown","text/x-rst":"rest"};t.default=o.default.ItemView.extend({events:{"change #id_syntax-mode":"setSyntaxMode","change #id_indent-mode":"setIndentMode","change #id_indent-size":"setIndentSize","change #id_wrap-mode":"setLineWrapping","click button":"copyContent","click .save-button":"saveChanges","click .preview-button":"previewChanges","click .render-button":"renderFile","click .cancel-link":"checkForChanges","click .next-hunk-button":"nextHunk","click .prev-hunk-button":"prevHunk"},initialize:function(e){var t=this;n.e(1).then(function(i){var r,o,h,g=n(7336),v=n(7338);a.default.bindAll(t,"setSyntaxMode","setIndentMode","setIndentSize","copyContent","saveChanges","previewChanges","renderFile","checkForChanges","nextHunk","prevHunk","toggleButtons","toggleHunkButtons","ready");var b=t.$el.data("local-id"),y=t.$el.data("is-pull-request"),w=t.$el.data("hide-create-pull-request")||y,x=t.$el.data("is-writer"),M=t.$el.data("is-create"),_=t.$el.data("has-push-access"),E=t.$el.attr("data-path"),C=e.redirectUrl||t.$el.attr("data-redirect-url"),k=e.editorModules&&e.editorModules.length>0;if(y){var j=(0,s.default)("#compare"),P="{}/{}".format(j.attr("data-owner"),j.attr("data-slug")),$="{}/{}".format(j.attr("data-destination-owner"),j.attr("data-destination-slug"));r=d.default.load(P),o=d.default.load($),h=j.attr("data-hash")}else r=d.default.load(t.$el.attr("data-repository")),h=t.$el.attr("data-hash");var O=g;k&&(O=(0,l.get)(m.default,["global","features","connect-v5-back"])?n(7339):v),t.codeEditor=new O({el:t.$("#id_source"),editorModules:e.editorModules,source:e.source,path:E}),t.codeEditor.onChange(t.toggleButtons),t.$renderButton=t.$(".render-button"),t.renderMarkupType=null,t.setSyntaxMode(),t.setIndentMode(),t.setIndentSize(),t.commitForm=new f.default({repository:r,destinationRepository:o,localID:b,isCreate:M,isWriter:t.$el.data("is-writer"),hasPushAccess:t.$el.data("has-push-access"),isPullRequest:y,hideCreatePullRequest:w,hash:h,branch:t.$el.attr("data-branch"),path:E,redirectUrl:C}),t.$previewButton=t.$(".preview-button"),t.$fileEditor=t.$(".file-editor"),t.$previewPane=t.$(".preview-pane"),t.$renderPane=t.$(".render-pane"),t.$editorControls=t.$(".bb-content-container-footer .bb-content-container-footer-primary"),t.$editPath=t.$(".edit-path"),t.previewError=t.$el.attr("data-preview-error"),t.renderError=t.$el.attr("data-render-error"),t.unsavedChangesError=t.$el.attr("data-unsaved-changes-error"),t.$hunkNav=t.$(".hunk-nav"),t.$hunkNav.hide(),t.currentLine=-1,t.$nextButton=t.$(".next-hunk-button"),t.$prevButton=t.$(".prev-hunk-button"),t.$nextButton.tooltip(),t.$prevButton.tooltip(),t.nextDisabled=!0,t.prevDisabled=!0,t.commitEnabled=!0,t.isCreate=M,t.isPluggableEditor=k,t.previewing=!1,t.renderingFile=!1,t.isPullRequest=y,t.isWriter=x,t.hasPushAccess=_;var S=function(){var e=(0,s.default)(".pjax-trigger");e.off(".editor"),e.on("click.editor",(function(e){var n=(0,s.default)(e.target),i=a.default.omit(u.default.parse(window.location.search.substring(1)),"at");if(Object.keys(i).length&&n.attr("href",n.attr("href")+"&"+u.default.stringify(i)),(!y||!n.hasClass("edit-button"))&&t.codeEditor.contentHasChanged())return(0,c.default)(t.unsavedChangesError).done((function(){p.default.trackEvent("Online editing","Abandon changes"),t.remove(),n.click()})),!1}))};if(S(),(0,s.default)(document).on("branchDialogReady",S.bind(t)),t.$("select").auiSelect2(),y){var R=r.pullRequests.load(b);R.fetch().done((function(){R.sourceDiff().done((function(e){var n=e.diff[E];n&&(t.codeEditor.showDiff(n,t.toggleHunkButtons.bind(t)),t.$hunkNav.show(),t.codeEditor.setCursor({line:0,ch:0}),null===t.codeEditor.getCurrentHunk().line&&t.codeEditor.nextHunk(),t.toggleHunkButtons(),t.codeEditor.onCursorActivity((function(e){var n=e.getCursor().line;n!==t.currentLine&&(t.toggleHunkButtons(),t.currentLine=n)})),t.codeEditor.onViewportChange((function(){var e=(0,s.default)(".CodeMirror-gutters").width()-5;(0,s.default)(".CodeMirror-diff-gutter").width(e+"px")})))})).always(t.ready)})).fail(t.ready)}else a.default.defer(t.ready)}.bind(null,n)).catch(n.oe)},refresh:function(){this.codeEditor.refresh(),this.codeEditor.focus()},setPath:function(e){return this.commitForm.originalPath=e,0===e.indexOf("/")&&(e=e.slice(1)),this.$editPath.text(e),this},showRenderButtonIfSupportedSyntax:function(){this.renderMarkupType?this.$renderButton.show():this.$renderButton.hide()},ready:function(){this.trigger("ready"),this.isPluggableEditor?(this.$previewButton.hide(),this.$renderButton.hide(),this.$editorControls.hide()):(this.$previewButton.show(),this.showRenderButtonIfSupportedSyntax(),this.$editorControls.show())},remove:function(){(0,s.default)(window).off(".editor"),(0,s.default)(".pjax-trigger").off(".editor"),this.commitForm.remove(),this.codeEditor.remove(),r.default.View.prototype.remove.call(this)},setSyntaxMode:function(e){if(e){var t=(0,s.default)(e.target).val();this.codeEditor.updateMode(t),this.renderMarkupType=v[t],this.showRenderButtonIfSupportedSyntax()}else this.$("#id_syntax-mode").val(this.codeEditor.getOption("mode")).trigger("change")},updatePathBasedSyntax:function(e){var t=this;return Promise.resolve().then(function(i){var r=n(5015)(e).mime;t.codeEditor.setOption("mode",r),t.$("#id_syntax-mode").val(r).trigger("change")}.bind(null,n)).catch(n.oe),this},setIndentMode:function(e){var t;e?(t="tabs"===(0,s.default)(e.target).val(),this.codeEditor.setOption("indentWithTabs",t)):(t=this.codeEditor.getOption("indentWithTabs"),this.$("#id_indent-mode").val(t?"tabs":"spaces")),t?this.$("#indent-size").hide():this.$("#indent-size").show()},setIndentSize:function(e){e?this.codeEditor.setOption("indentUnit",parseInt((0,s.default)(e.target).val(),10)):this.$("#id_indent-size").val(this.codeEditor.getOption("indentUnit"))},setLineWrapping:function(e){e?this.codeEditor.setOption("lineWrapping",(0,s.default)(e.target).val()):this.$("#id_wrap-mode").val(this.codeEditor.getOption("lineWrapping"))},setCommitEnabled:function(e){return this.commitEnabled=!!e,this.toggleButtons(),this},disable:function(){return this.$previewButton.addClass("loading"),this.codeEditor.disable(),this.disableButtons(),this},enable:function(){return this.$previewButton.removeClass("loading"),this.codeEditor.enable(),this.enableButtons(),this.resetHunkNavButtons(),this},disableButtons:function(){return this.$("button").attr({disabled:"disabled","aria-disabled":!0}),this},enableButtons:function(){return this.$("button").removeAttr("disabled aria-disabled"),this},hasCommittableContent:function(){return this.commitEnabled&&this.isCreate&&this.isCreationValid()||!this.isCreate&&this.codeEditor.contentHasChanged()&&this.codeEditor.contentIsValid()},isCreationValid:function(){return this.codeEditor.getContent().trim()&&(!this.options.isParentValid||this.options.isParentValid())},toggleButtons:function(){this.hasCommittableContent()?this.enableButtons():this.disableButtons(),this.resetHunkNavButtons()},copyContent:function(){this.commitForm.setContent(this.codeEditor.getContent())},saveChanges:function(e){e&&e.preventDefault(),this.commitForm.show(),p.default.trackEvent("Online editing","Save changes")},renderFile:function(e){if(e&&e.preventDefault(),this.renderingFile)return this.renderingFile=!1,this.$renderButton.removeAttr("aria-pressed").html(this.$renderButton.attr("data-preview-label")),this.$previewPane.hide(),this.$renderPane.hide(),this.$fileEditor.show(),this.$editorControls.show(),this.$previewButton.show(),this.isPullRequest&&this.$hunkNav.show(),this.trigger("recenter"),void this.codeEditor.focus();p.default.trackEvent("Online editing","Render file"),this.commitForm.getCommit().set({transient:!0,message:"Render"}),this.disable(),s.default.ajax({type:"POST",url:this.$el.attr("data-render-url"),data:JSON.stringify({content:this.codeEditor.getContent(),repo_id:parseInt(this.$el.attr("data-repository-id")),markup_type:this.renderMarkupType}),dataType:"html",contentType:"application/json; charset=utf-8"}).done(function(e){this.renderingFile=!0,this.$renderButton.attr("aria-pressed",!0).html(this.$renderButton.attr("data-edit-label")),this.$renderPane.html(JSON.parse(e).markup),this.$fileEditor.hide(),this.$hunkNav.hide(),this.$previewPane.hide(),this.$previewButton.hide(),this.$renderPane.show(),this.$editorControls.hide(),this.enable()}.bind(this)).error(function(){i.default.messages.error({body:this.renderError}),this.enable()}.bind(this))},previewChanges:function(e){if(e&&e.preventDefault(),this.previewing)return this.previewing=!1,this.$previewButton.removeAttr("aria-pressed").html(this.$previewButton.attr("data-preview-label")),this.$previewPane.hide(),this.$renderPane.hide(),this.$fileEditor.show(),this.$editorControls.show(),this.showRenderButtonIfSupportedSyntax(),this.isPullRequest&&this.$hunkNav.show(),this.trigger("recenter"),void this.codeEditor.focus();p.default.trackEvent("Online editing","Preview changes");var t=this.commitForm.getCommit();t.set({transient:!0,message:"Preview"}),this.disable(),s.default.ajax({type:"POST",url:this.$el.attr("data-preview-url"),data:JSON.stringify(t.toJSON()),dataType:"html",contentType:"application/json; charset=utf-8"}).done(function(e){this.previewing=!0,this.$previewButton.attr("aria-pressed",!0).html(this.$previewButton.attr("data-edit-label")),this.$previewPane.html(e);var t=this.$previewPane.find(".bb-udiff"),n=t.attr("data-filename");new h.default(t.attr("data-expand-context-url")+encodeURI(n),t.attr("data-identifier"),!1).decorate(t),this.$(".bb-udiff").removeClass("maskable"),this.$fileEditor.hide(),this.$hunkNav.hide(),this.$renderPane.hide(),this.$renderButton.hide(),this.$previewPane.show(),this.$editorControls.hide(),this.enable()}.bind(this)).error(function(){i.default.messages.error({body:this.previewError}),this.enable()}.bind(this))},checkForChanges:function(e){if(this.codeEditor.contentHasChanged())return(0,c.default)(this.unsavedChangesError).done(function(){this.codeEditor.resetContent(),(0,s.default)(e.target).click()}.bind(this)),!1},resetHunkNavButtons:function(){this.nextDisabled&&this.$nextButton.attr({disabled:"disabled","aria-disabled":!0}),this.prevDisabled&&this.$prevButton.attr({disabled:"disabled","aria-disabled":!0})},toggleHunkButtons:function(){var e=this.codeEditor.getNextHunk(),t=this.codeEditor.getPrevHunk();null!==e.line?this.nextDisabled&&(this.$nextButton.removeAttr("disabled aria-disabled"),this.nextDisabled=!1):this.nextDisabled||(this.$nextButton.attr({disabled:"disabled","aria-disabled":!0}),this.nextDisabled=!0,this.$nextButton.tooltip("hide")),null!==t.line?this.prevDisabled&&(this.$prevButton.removeAttr("disabled aria-disabled"),this.prevDisabled=!1):this.prevDisabled||(this.$prevButton.attr({disabled:"disabled","aria-disabled":!0}),this.prevDisabled=!0,this.$prevButton.tooltip("hide"))},nextHunk:function(e){e&&e.preventDefault(),this.codeEditor.nextHunk()},prevHunk:function(e){e&&e.preventDefault(),this.codeEditor.prevHunk()}}),e.exports=t.default},4543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.mapAttributesToProps=y,n(821);var a=m(n(42)),u=m(n(0)),l=n(4865),d=n(7199),c=n(33),h=m(n(7202)),f=m(n(7204)),p=m(n(7205));function m(e){return e&&e.__esModule?e:{default:e}}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=2e7,b="editor-popup-container";function y(e){var t={};if(e.hasAttributes&&e.hasAttributes()){for(var n=e.attributes,i=0,r=n.length;i<r;i++){t[n[i].name.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))]=n[i].value}if("true"===t.privateCommentCheckbox){delete t.privateCommentCheckbox;var s=!1;"privateCommentChecked"in t&&(s="true"===t.privateCommentChecked,delete t.privateCommentChecked),t.secondaryToolbarComponents=[u.default.createElement("label",{className:"is-private",key:"is-private"},u.default.createElement("input",{type:"checkbox",defaultChecked:s})," Private")]}}return t}var w=(r=i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onEditorLoad=function(e){return function(t){e.expand=n.expand,e.collapse=n.collapse,n.props.onEditorReady&&n.props.onEditorReady(e)}},n.expand=function(){return n.setState({isExpanded:!0})},n.collapse=function(){return n.setState({isExpanded:!1})},n.state={isExpanded:!!e.isExpandedByDefault},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.onEditorReady,t.isExpandedByDefault,t.onExpand),i=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["onEditorReady","isExpandedByDefault","onExpand"]),r=gettext("What would you like to say?");return u.default.createElement(l.EditorContext,null,u.default.createElement(l.WithEditorActions,{render:function(t){return u.default.createElement(l.CollapsedEditor,{placeholder:r,isExpanded:e.state.isExpanded,onFocus:e.expand,onExpand:n,ref:e.onEditorLoad(t)},u.default.createElement(l.Editor,s({},i,{primaryToolbarComponents:[u.default.createElement(l.ToolbarFeedback,{key:"feedback",product:"bitbucket",packageName:l.name,packageVersion:l.version,popupsMountPoint:i.popupsMountPoint}),u.default.createElement(l.ToolbarHelp,{key:"help"})]})))}}))}}]),t}(u.default.PureComponent),i.defaultProps={isExpandedByDefault:!1},r);function x(e){var t=y(e),n=document.getElementById(b),i=s({},t,{appearance:"comment",allowCodeBlocks:{enableKeybindingsForIDE:!0},allowHyperlinks:!0,allowLists:!0,allowMentions:!0,allowTables:!0,allowTextFormatting:{disableSuperscriptAndSubscript:!0,disableUnderline:!0},allowHelpDialog:!0,allowRule:!0,allowGapCursor:!0,emojiProvider:h.default.get(),mentionProvider:p.default.get(),legacyImageUploadProvider:Promise.resolve(f.default),analyticsHandler:c.publishLegacyEvent,contentTransformerProvider:function(e){return new d.BitbucketTransformer(e)},popupsMountPoint:n,shouldFocus:!t.shouldFocus||"true"===t.shouldFocus,onExpand:function(){e.dispatchEvent(new CustomEvent("expand",{bubbles:!0,cancelable:!0}))},onChange:function(){e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))},onEditorReady:function(t){e.editorActions=t,e.dispatchEvent(new CustomEvent("ready",{bubbles:!0,cancelable:!0}))}});t.showButtons&&(i.onCancel=function(){e.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,cancelable:!0}))},i.onSave=function(){e.dispatchEvent(new CustomEvent("save",{bubbles:!0,cancelable:!0}))}),a.default.render(u.default.createElement(w,i),e)}!function(){if(document.body&&!document.getElementById(b)){var e=document.createElement("div");e.setAttribute("id",b),e.style.zIndex=v,document.body.appendChild(e)}}(),[].concat(g(document.querySelectorAll("ak-editor-bitbucket"))).forEach((function(e){return x(e)})),new MutationObserver((function(e){e.forEach((function(e){if(e.addedNodes&&e.addedNodes.length){var t=[].concat(g(e.addedNodes));t.filter((function(e){return"AK-EDITOR-BITBUCKET"===e.nodeName})).forEach((function(e){return x(e)})),t.filter((function(e){return e instanceof Element})).forEach((function(e){return[].concat(g(e.querySelectorAll("ak-editor-bitbucket"))).forEach((function(e){return x(e)}))}))}}))})).observe(document.body,{childList:!0,attributes:!1,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1})},4544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.default=function(e){var t=e.$field,n=e.fetchUsers,i=e.reviewers,s=(0,r.default)('<div class="reviewers-react-container"></div>');s.insertAfter(t),t.val(i.map(p)),a.default.render(o.default.createElement(u.default,null,o.default.createElement(g,{$field:t,fetchUsers:n,reviewers:i})),s.get(0))};var r=d(n(6)),s=n(27),o=d(n(0)),a=d(n(42)),u=d(n(201)),l=d(n(7208));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=200,f=function(e){return e.model},p=function(e){return e.id},m=function(e){return{avatarUrl:e.attributes.avatar_url,id:e.id,model:e,name:e.attributes.display_name,publicName:e.attributes.nickname,type:"user"}},g=function(e){function t(){for(var e,n,i,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=i=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),i.state={isLoading:!1,isQueryEmpty:!0,options:[],reviewers:i.props.reviewers.map(m)},i.debouncedUserLookup=(0,s.debounce)((function(e){i.props.fetchUsers(e||"",(function(e){i.setState({isLoading:!1,options:e.map(m)})}))}),h),i.handleBackboneCollectionChange=function(){var e=i.props,t=e.$field,n=e.reviewers;t.val(n.map(p)),i.setState({reviewers:n.map(m)})},i.handleChange=function(e,t){i.props.reviewers.reset(e.map(f))},i.handleFocus=function(){i.setState({isQueryEmpty:!0,options:[]})},i.handleInputChange=function(e){e?(i.setState({isLoading:!0,isQueryEmpty:!1,options:[]}),i.debouncedUserLookup(e)):i.setState({isQueryEmpty:!0,options:[]})},c(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.reviewers.on("add remove reset",this.handleBackboneCollectionChange)}},{key:"componentWillUnmount",value:function(){this.props.reviewers.off("add remove reset",this.handleBackboneCollectionChange)}},{key:"render",value:function(){return o.default.createElement(l.default,{isLoading:this.state.isLoading,isQueryEmpty:this.state.isQueryEmpty,onChange:this.handleChange,onFocus:this.handleFocus,onInputChange:this.handleInputChange,options:this.state.options,value:this.state.reviewers})}}]),t}(o.default.Component);e.exports=t.default},4545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(5476),s=(i=r)&&i.__esModule?i:{default:i};t.default=s.default.extend({getOriginal:function(){return this.$("#source-view")}}),e.exports=t.default},4546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(5476),s=(i=r)&&i.__esModule?i:{default:i};t.default=s.default.extend({getOriginal:function(){return this.$(".diff-container")}}),e.exports=t.default},4601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(20)),r=s(n(4554));function s(e){return e&&e.__esModule?e:{default:e}}n(7207),n(5e3);var o=r.default.findModeByMIME("text/x-gfm");r.default.modeInfo=i.default.without(r.default.modeInfo,o),r.default.modeInfo.forEach((function(e,t,n){"VB.NET"===e.name?e.ext.push("bas"):"PHP"===e.name?(e.mimes=["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],e.mime=e.mimes[0]):"Jinja2"!==e.name&&"PEG.js"!==e.name||(e.mime=null)})),t.default=r.default,e.exports=t.default},4669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},5014:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(24)),r=u(n(53)),s=u(n(7327)),o=u(n(7328)),a=u(n(83));function u(e){return e&&e.__esModule?e:{default:e}}var l=r.default.ItemView.extend({template:!1,className:"snippets-editor-close aui-icon aui-icon-small aui-iconfont-remove",events:{click:"setClosed"},setClosed:function(){var e=this.model;(0,a.default)({title:gettext("Delete file"),warning:!0,content:gettext("Are you sure you want to delete this file from the snippet?"),submitText:gettext("Delete")}).done((function(){e.set("closed",!0)}))}});t.default=r.default.ItemView.extend({template:!1,modelEvents:{"change:closed":"updateClasses",invalid:"showError"},className:function(){return["snippets-editor","bb-row"].join(" ")},initialize:function(){this.pathView=new o.default({model:this.model,className:[o.default.prototype.className,"bb-content-container-item"].join(" ")}),this.closeButton=new l({model:this.model}),this.container={header:{primary:[this.pathView],secondary:[this.closeButton]}}},onRender:function(){var e=new s.default(this.container).render();this.$el.html(e.$el)},showError:function(e,t){this.errorMessage&&this.errorMessage.closeMessage(),this.errorMessage=i.default.messages.error(this.$el.find(".bb-content-container-body"),{title:gettext("Invalid file"),body:"<p>{}</p>".format(t)})},updateClasses:function(){this.$el.attr("class",this.className())}}),e.exports=t.default},5015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.default.findModeByMIME("text/plain");return e&&s.default.findModeByFileName(e)||t};var i,r=n(4601),s=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},5476:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(36)),r=f(n(6)),s=f(n(20)),o=f(n(4539)),a=f(n(83)),u=f(n(4541)),l=f(n(81)),d=f(n(1983)),c=f(n(35)),h=f(n(128));function f(e){return e&&e.__esModule?e:{default:e}}var p=null;function m(e){p=e}(0,r.default)(document).on("pjax:end",(function(){m(null)}));var g=function(){};t.default=i.default.View.extend({events:{"click .edit-button":"toggle","click .cancel-link":"toggle"},initialize:function(e){s.default.bindAll(this,"toggle","recenter"),this.repoId=e.repoId,this.owner=e.owner,this.slug=e.slug,this.destinationOwner=e.destinationOwner,this.destinationSlug=e.destinationSlug,this.localID=e.localID,this.isWriter=e.isWriter,this.hasPushAccess=e.hasPushAccess,this.hideCreatePullRequest=e.hideCreatePullRequest,this.isPullRequest=e.isPullRequest,this.hash=e.hash,this.branch=e.branch,this.path=e.path,this.sourceUrl=e.sourceUrl,this.multipleError=e.multipleError,this.createFile=e.createFile,this.editMode="edit"===h.default.get("mode"),this.onOpen=e.onOpen||g,this.onClose=e.onClose||g,this.editing=!1;var t=this.$el.find(".edit-button");t.closest(".aui-dropdown2").length&&t.on("click",this.toggle),this.editMode&&(this.delegateEvents(),t.trigger("click"))},toggle:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(e.preventDefault(),(0,r.default)(e.target).is("[disabled]"))||(this.isPullRequest&&p&&p!==this?(0,a.default)(this.multipleError).done((function(){p.toggle(void 0,!0),t.toggle(e,!0)})):this.editing?(this.viewOriginal(),this.editing=!1,this.$el.trigger("stop.editable"),this.onClose(n)):(this.editFile(e),this.editing=!0,this.$el.trigger("start.editable"),this.onOpen(n)))},editFile:function(e){var t=(0,r.default)(e.target),n=[],i=t.data("editorModules");if(i){var a=i.trim();""!==a&&(n=a.split(" "))}function h(e){var i=(e=e||{}).mimetype?e.mimetype.type:"text/plain",a=e.data||"",l=(0,r.default)(c.default.toHtml("edit-form-template",{repoId:this.repoId,owner:this.owner,slug:this.slug,destinationOwner:this.destinationOwner,destinationSlug:this.destinationSlug,localID:this.localID,isCreate:!1,isWriter:this.isWriter,hasPushAccess:this.hasPushAccess,isPullRequest:this.isPullRequest,hash:this.hash,branch:this.branch,path:this.path,encodedPath:encodeURIComponent(this.path),mimetype:i,content:a,syntaxes:s.default.sortBy(o.default,(function(e){return e.name.toLowerCase()}))})).appendTo(this.$el);l.hide(),this.editForm=new u.default({el:l,source:a,editorModules:n}),this.editForm.on("recenter",this.recenter.bind(this)),this.editForm.on("ready",function(){this.showEditor(t)}.bind(this))}m(this),l.default.trackEvent("Online editing","Load editor"),t.attr({disabled:"disabled","aria-disabled":!0}),d.default.mask(this.$el,{spinner:d.default.spinnerSizes.LARGE}),this.createFile?h.bind(this)():r.default.ajax({url:this.sourceUrl,type:"GET",dataType:"json"}).done(h.bind(this)).fail(function(){t.removeAttr("disabled aria-disabled"),d.default.unmask(this.$el),m(null),this.toggle()}.bind(this))},recenter:function(){(0,r.default)("html, body").stop().animate({scrollTop:this.$el.offset().top-10},250)},showEditor:function(e){e.removeAttr("disabled aria-disabled"),d.default.unmask(this.$el),this.getOriginal().hide(),this.editForm.$el.show(),this.editForm.refresh(),this.recenter()},getOriginal:function(){return null},viewOriginal:function(){this.editForm&&this.editForm.remove(),this.getOriginal().show(),m(null)}}),e.exports=t.default},5477:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return s(e);if("number"==typeof e)return r(e,t);return null},e.exports.format=r,e.exports.parse=s;var i={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)};function r(e,t){if("number"!=typeof e)return null;var n=Math.abs(e),r=t&&t.thousandsSeparator||"",s="B",o=e;return n>=i.tb?(o=Math.round(o/i.tb*100)/100,s="TB"):n>=i.gb?(o=Math.round(o/i.gb*100)/100,s="GB"):n>=i.mb?(o=Math.round(o/i.mb*100)/100,s="MB"):n>=i.kb&&(o=Math.round(o/i.kb*100)/100,s="kB"),r&&(o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,r)),o+s}function s(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=e.match(/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e),r="b"),i[r]*t}},5478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(20)),r=u(n(36)),s=u(n(7311)),o=u(n(7312)),a=u(n(5479));function u(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.Model.extend({defaults:{type:"text/plain"},initialize:function(e){e.text?this.setText(e.text):e.contents?this.set("contents",new Uint8Array(e.contents)):this.isNew()&&!this.has("contents")&&this.set("contents",new Uint8Array),this.initialAttrs=i.default.clone(this.attributes),this.on("sync",(function(){this.initialAttrs=i.default.clone(this.attributes)}))},isEmpty:function(){return i.default.all([this.get("path"),this.get("contents")],i.default.isEmpty)},parse:function(e){return(e=i.default.clone(e))["content-type"]&&(e.type=e["content-type"],delete e["content-type"]),e},category:function(){return this.get("category")||(0,a.default)(this.get("type"),this.get("contents"))},hasChangedSinceSync:function(){return!i.default.isEqual(this.attributes,this.initialAttrs)},wasRenamedSinceSync:function(){return this.attributes.path!==this.initialPath()},initialPath:function(){return this.initialAttrs.path},isNew:function(){return!this.has("url")},toText:function(){if(!this.get("contents"))return"";for(var e="",t=0,n=this.get("contents").length;t<n;t++)e+=String.fromCharCode(this.get("contents")[t]);return s.default.decode(e)},setText:function(e){for(var t=s.default.encode(e),n=new Uint8Array(t.length),i=0,r=t.length;i<r;i++)n[i]=t.charCodeAt(i);this.set("contents",n)},toURL:function(){return this.has("url")?this.get("url"):o.default.fromArrayBuffer(this.get("contents"),this.get("type"))},toBlob:function(){var e=this.get("closed")?"":this.get("contents");return new Blob([e],{type:this.get("type")})}}),e.exports=t.default},5479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(e=e||"").match(/^image\//)?"image":e.match(/^application\//)&&!i.default.findModeByMIME(e)?"binary":t&&(0,r.default)(t)?"binary":"text"};var i=s(n(4601)),r=s(n(7314));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},5480:function(e,t){var n={arraybuffer:"readAsArrayBuffer",dataurl:"readAsDataURL",text:"readAsText"};function i(e,t,i){var r;"string"!=typeof t&&(i=t,t="arraybuffer"),i||(r=new Promise((function(e,t){i=function(n,i){n?t(n):e(i)}})));var s=n[t.toLowerCase()],o=new FileReader;return o.addEventListener("loadend",(function e(t){o.removeEventListener("loadend",e),t.error?i(t.error):i(null,o.result)})),s?o[s](e):o.readAsText(e,t),r}e.exports=i,Object.keys(n).forEach((function(e){i[e]=function(t,n){return i(t,e,n)}}))},5481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new s.default.Deferred;e&&"null"!==e.mode?Promise.all([n.e(38),n.e(1)]).then(function(i){t.resolve(n(7341)("./"+e.mode+"/"+e.mode+".js"))}.bind(null,n)).catch(n.oe):t.resolve(null);return t.promise()};var i,r=n(6),s=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},5482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.getOption("indentWithTabs")||e.getSelection())return s.default.Pass;var t,n,i=e.getCursor(),r=e.getLine(i.line),o=r.slice(0,i.ch),a=o.match(/^\s+$/),u=e.getOption("indentUnit");if(!a||a[0].length%u!=0)return s.default.Pass;t={line:i.line,ch:0},n={line:i.line,ch:r.length},e.replaceRange(r.slice(u),t,n),e.setCursor({line:i.line,ch:o.length-u})};var i,r=n(4601),s=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},5483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.getOption("indentWithTabs"))return s.default.Pass;var t=new Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t,"end","+input")};var i,r=n(4601),s=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},5484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(20)),r=u(n(36)),s=u(n(4601)),o=u(n(5015)),a=u(n(5485));function u(e){return e&&e.__esModule?e:{default:e}}var l=r.default.Model.extend({defaults:{syntaxMode:s.default.findModeByMIME("text/plain"),indentMode:"spaces",indentSize:4,lineEnding:"\n"},initialize:function(){this.on("change:indentMode change:indentSize",(function(){this.trigger("change:indentUnit",this.indentUnit())}))},indentUnit:function(){return"spaces"===this.get("indentMode")?this.get("indentSize"):4}});l.fromFile=function(e){var t=e.toText()&&e.toText().slice(0,4096),n=(0,o.default)(e.get("path"));return new l(i.default.extend((0,a.default)(t),{syntaxMode:n}))},t.default=l,e.exports=t.default},5485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return{indentMode:"spaces",indentSize:4,lineEnding:"\n"};var t=e.split("\n"),n=0,i=0,r=0,o=0,a=0,u={},l=[],d=0,c=0;s.default.each(t,(function(e){"\t"===e.slice(0,1)?n++:" "===e.slice(0,1)&&i++,r=o,o=e.length-e.replace(/^\s+/,"").length,(a=o-r)>0&&a<13&&(s.default.has(u,a)?u[a]++:u[a]=1),"\r"===e.slice(-1)?d++:c++})),s.default.each(u,(function(e,t){l.push([t,e])}));var h=s.default.max(l,(function(e){return e[1]}))[0];return{indentMode:n>=i?"tabs":"spaces",indentSize:parseInt(h,10),lineEnding:d>=c?"\r\n":"\n"}};var i,r=n(20),s=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},6314:function(e,t){},6316:function(e,t){},6332:function(e,t){},6333:function(e,t){},6334:function(e,t){},7202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4865),r=n(27),s=n(7203);t.default={get:(0,r.memoize)((function(){var e=(0,s.baseUrl)();if(e)return Promise.resolve(new i.EmojiResource({providers:[{url:e+"standard",securityProvider:function(){return{params:{maxVersion:"VERSION_9_0"}}}}]}))}))},e.exports=t.default},7203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseUrl=void 0;var i=n(27);t.baseUrl=(0,i.memoize)((function(){return document.body.getAttribute("data-atlassian-emoji-base-url")||""}))},7204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=function(e){return t({src:(e.href||"").replace(/\(/g,"%28").replace(/\)/g,"%29"),alt:e.filename,title:e.filename})};if(!1===e||void 0===e)return(0,i.openImageUploadDialogWithFile)(n,null),!0;var s=void 0;if(e instanceof ClipboardEvent&&e.clipboardData&&e.clipboardData instanceof DataTransfer)s=e.clipboardData;else{if(!(e instanceof r&&e.dataTransfer&&e.dataTransfer instanceof DataTransfer))return;s=e.dataTransfer}if(s.files&&s.files.length&&(0,i.openImageUploadDialogWithFile)(n,s.files[0]),s.items&&s.items.length)for(var o=0;o<s.items.length;o++){var a=s.items[o];if("file"===a.kind&&a.getAsFile instanceof Function)return(0,i.openImageUploadDialogWithFile)(n,a.getAsFile()),!0}};var i=n(202),r=window.DragEvent||window.MouseEvent;e.exports=t.default},7205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MentionResource=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(4865),s=d(n(7206)),o=d(n(392)),a=d(n(54)),u=n(632),l=d(n(27));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.mentionSource=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"filter",value:function(e){var t,n=this,i=function(e){n._notifyListeners(e),n._notifyAllResultsListeners(e)},r=function(e){n._notifyInfoListeners(e)};if(this.mentionSource){if(this.mentionSource.on("respond",(function(t){if(t.query===e)if(t.results.length){var n=!!a.default.global.identityPassthroughEnabled,s=l.default.chain(t.results).map((function(e,t){var i=e.attributes,r=i.avatar_url,s=i.display_name,o=i.is_teammate,a=i.mention_id,l=i.nickname,d={id:n?"{"+a+"}":a,avatarUrl:r,name:s,mentionName:a,lozenge:o?"teammate":""};return n&&(0,u.hasDistinctDisplayName)(s,l)&&(d.nickname=l),d})).sortBy("name").value(),o=[].concat(c(s.filter((function(e){return!!e.lozenge}))),c(s.filter((function(e){return!e.lozenge}))));i({mentions:o,query:e})}else{if(e.length>=3){var d=interpolate(gettext("Found no matches for %(mentionQuery)s"),{mentionQuery:e},!0);r(d)}else{var h=gettext("Continue typing to search for a user");r(h)}i({mentions:[],query:e})}})),e.length<o.default.MENTIONS_MIN_QUERY_LENGTH){var s=gettext("Continue typing to search for a user");r(s)}this.mentionSource.query(e)}else t=new Error("No mentions source provided"),n._notifyErrorListeners(t)}}]),t}(r.AbstractMentionResource);t.MentionResource=h,t.default={get:function(){return Promise.resolve(new h(s.default.get()))}}},7206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(6)),r=d(n(20)),s=d(n(286)),o=d(n(824)),a=d(n(338)),u=d(n(39)),l=d(n(2056));function d(e){return e&&e.__esModule?e:{default:e}}var c={};t.default={get:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url||"/xhr/mentions/repositories/"+u.default.fullslug,n=e.context||u.default.fullslug;return c[t]||(c[t]=new a.default((0,o.default)(n),r.default.extend({},s.default,{queryEndpoint:t}))),c[t]}({url:(0,i.default)("[data-mention-url]:first").attr("data-mention-url"),context:(0,l.default)()})}},e.exports=t.default},7208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(7209)),s=u(n(0)),o=n(41),a=u(n(7309));function u(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.injectIntl)(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this.props.isQueryEmpty?this.props.intl.formatMessage(a.default.reviewersSearchPlaceholder):this.props.intl.formatMessage(a.default.noResults);return s.default.createElement(r.default,{addMoreMessage:this.props.intl.formatMessage(a.default.addMoreMessage),appearance:"compact",isLoading:this.props.isLoading,isMulti:!0,noOptionsMessage:e,onChange:this.props.onChange,onFocus:this.props.onFocus,onInputChange:this.props.onInputChange,options:this.props.options,placeholder:s.default.createElement(o.FormattedMessage,a.default.reviewersInputPlaceholder),value:this.props.value,width:"100%"})}}]),t}(s.default.Component)),e.exports=t.default},7309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(41);t.default=(0,i.defineMessages)({addMoreMessage:{id:"bitbucket.pullrequest.reviewers.addMoreMessage",defaultMessage:"Add more reviewers..."},noResults:{id:"bitbucket.pullrequest.reviewers.noResults",defaultMessage:"No matches found. Make sure the person you're looking for has access to this repository."},reviewersInputPlaceholder:{id:"bitbucket.pullrequest.reviewers.inputPlaceholder",defaultMessage:"Add reviewers..."},reviewersSearchPlaceholder:{id:"bitbucket.pullrequest.reviewers.searchPlaceholder",defaultMessage:"Type a full name or public name"}}),e.exports=t.default},7310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(36)),r=o(n(4601)),s=o(n(5478));function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.Collection.extend({model:s.default,toFormData:function(){var e=this,t=new FormData;return this.forEach((function(n,i){if((n.hasChangedSinceSync()||n.isNew())&&(!n.isEmpty()||!n.isNew())){if(!n.get("path")||!n.get("path").trim()){var s=r.default.findModeByMIME(n.get("type")),o=s.ext&&s.ext[0];n.set("path",e.getNextName("snippet",o))}t.append("files",n.get("path")),!n.isNew()&&n.wasRenamedSinceSync()&&t.append("files",n.initialPath()),n.get("closed")||t.append("file",n.toBlob(),n.get("path"))}})),t},isValid:function(){return this.validationError=this.validate(),!this.validationError},validate:function(){if(this.all((function(e){return e.isEmpty()})))return gettext("All files are empty")},getNextName:function(e,t){t=t||"txt";for(var n=this.pluck("path"),i="{}.{}".format(e,t),r=2;-1!==n.indexOf(i);r++)i="{}{}.{}".format(e,r,t);return i}}),e.exports=t.default},7311:function(e,t,n){(function(e,i){var r;/*! http://mths.be/utf8js v2.0.0 by @mathias */!function(s){var o=t,a=(e&&e.exports,"object"==typeof i&&i);a.global!==a&&a.window;var u,l,d,c=String.fromCharCode;function h(e){for(var t,n,i=[],r=0,s=e.length;r<s;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<s?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function f(e,t){return c(e>>t&63|128)}function p(e){if(0==(4294967168&e))return c(e);var t="";return 0==(4294965248&e)?t=c(e>>6&31|192):0==(4294901760&e)?(t=c(e>>12&15|224),t+=f(e,6)):0==(4292870144&e)&&(t=c(e>>18&7|240),t+=f(e,12),t+=f(e,6)),t+=c(63&e|128)}function m(){if(d>=l)throw Error("Invalid byte index");var e=255&u[d];if(d++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function g(){var e,t;if(d>l)throw Error("Invalid byte index");if(d==l)return!1;if(e=255&u[d],d++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|m())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|m()<<6|m())>=2048)return t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|m()<<12|m()<<6|m())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var v={version:"2.0.0",encode:function(e){for(var t=h(e),n=t.length,i=-1,r="";++i<n;)r+=p(t[i]);return r},decode:function(e){u=h(e),l=u.length,d=0;for(var t,n=[];!1!==(t=g());)n.push(t);return function(e){for(var t,n=e.length,i=-1,r="";++i<n;)(t=e[i])>65535&&(r+=c((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=c(t);return r}(n)}};void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(76)(e),n(31))},7312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(7313),s=(i=r)&&i.__esModule?i:{default:i};var o={format:function(e,t){return"data:"+t+";base64,"+e},fromArrayBuffer:function(e,t){return o.format((0,s.default)(e),t)}};t.default=o,e.exports=t.default},7313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=new Uint8Array(e),r=n.length,s="";for(t=0;t<r;t+=3)s+=i[n[t]>>2],s+=i[(3&n[t])<<4|n[t+1]>>4],s+=i[(15&n[t+1])<<2|n[t+2]>>6],s+=i[63&n[t+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports=t.default},7314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){for(var t=0;t<e.length;t++)if(0===e[t])return!0}(e=new Uint8Array(e))&&!function(e){if(e.length<2)return!1;return s.default.isEqual(e.subarray(0,3),new Uint8Array(o.utf8))||s.default.isEqual(e.subarray(0,2),new Uint8Array(o.utf16le))||s.default.isEqual(e.subarray(0,2),new Uint8Array(o.utf16be))||s.default.isEqual(e.subarray(0,4),new Uint8Array(o.utf32le))||s.default.isEqual(e.subarray(0,4),new Uint8Array(o.utf32be))}(e)};var i,r=n(20),s=(i=r)&&i.__esModule?i:{default:i};var o={utf8:[239,187,191],utf16le:[255,254],utf16be:[254,255],utf32le:[255,254,0,0],utf32be:[0,0,254,255]};e.exports=t.default},7315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(20)),r=s(n(53));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.Behavior.extend({defaults:{enableOnSuccess:!1,target:'[type="submit"]'},getTarget:function(){return i.default.isString(this.options.target)?this.$el.find(this.options.target):this.options.target},modelEvents:{sync:"onSync",request:"disableSubmission",error:"enableSubmission"},onSync:function(){this.options.enableOnSuccess&&this.enableSubmission()},disableSubmission:function(){this.getTarget().attr("disabled",!0)},enableSubmission:function(){this.getTarget().attr("disabled",!1)}}),e.exports=t.default},7316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(53)),r=u(n(5480)),s=u(n(7317)),o=u(n(5478)),a=u(n(7323));function u(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.ItemView.extend({className:"drop-input",template:!1,initialize:function(){var e=this;(0,s.default)(this.el,(function(t){return e._onDrop(t)})),this.$el.addClass(this.className)},_onDrop:function(e){var t=this;e.forEach((function(e){var n,i={path:e.name,type:e.type,size:e.size};(0,a.default)(e).then((function(t){var i=t?"arraybuffer":"text";return n=t?"contents":"text",(0,r.default)(e,i)})).then((function(e){i[n]=e,t.trigger("add:file",new o.default(i))}))}))}}),e.exports=t.default},7317:function(e,t,n){e.exports=function(e,t){"string"==typeof e&&(e=window.document.querySelector(e));var n=function(e){var t=s((function(){e instanceof window.Element&&e.classList.add("drag"),e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){e instanceof window.Element&&e.classList.remove("drag")}),150)}),100,{trailing:!1});return function(e){return e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",t(),!1}}(e),u=function(e,t){return function(n){n.stopPropagation(),n.preventDefault(),e instanceof window.Element&&e.classList.remove("drag");var s={x:n.clientX,y:n.clientY};if(n.dataTransfer.items)r(a(n.dataTransfer.items).map((function(e){return function(t){!function e(t,n){var i=[];if(t.isFile)t.file((function(e){e.fullPath=t.fullPath,n(null,e)}));else if(t.isDirectory){var s=t.createReader();!function t(){s.readEntries((function(s){s.length>0?(i=i.concat(a(s)),t()):r(i.map((function(t){return function(n){e(t,n)}})),n)}))}()}}(e.webkitGetAsEntry(),t)}})),(function(e,n){e||t(i(n),s)}));else{var o=a(n.dataTransfer.files);o.forEach((function(e){e.fullPath="/"+e.name})),t(o,s)}return!1}}(e,t);return e.addEventListener("dragenter",o,!1),e.addEventListener("dragover",n,!1),e.addEventListener("drop",u,!1),function(){e instanceof window.Element&&e.classList.remove("drag"),e.removeEventListener("dragenter",o,!1),e.removeEventListener("dragover",n,!1),e.removeEventListener("drop",u,!1)}};var i=n(7318),r=n(7319),s=n(7320);function o(e){return e.stopPropagation(),e.preventDefault(),!1}function a(e){return Array.prototype.slice.call(e||[],0)}},7318:function(e,t){e.exports=function(e,t){return t="number"==typeof t?t:1/0,function e(n,i){return n.reduce((function(n,r){return Array.isArray(r)&&i<t?n.concat(e(r,i+1)):n.concat(r)}),[])}(e,1)}},7319:function(e,t,n){(function(t){e.exports=function(e,n){var i,r,s,o=!0;function a(e){function r(){n&&n(e,i),n=null}o?t.nextTick(r):r()}function u(e,t,n){i[e]=n,(0==--r||t)&&a(t)}Array.isArray(e)?(i=[],r=e.length):(s=Object.keys(e),i={},r=s.length),r?s?s.forEach((function(t){e[t]((function(e,n){u(t,e,n)}))})):e.forEach((function(e,t){e((function(e,n){u(t,e,n)}))})):a(null),o=!1}}).call(this,n(65))},7320:function(e,t,n){var i=n(7321),r="Expected a function";e.exports=function(e,t,n){var s,o,a=!0,u=!0;if("function"!=typeof e)throw new TypeError(r);return!1===n?a=!1:(o=typeof(s=n),!s||"object"!=o&&"function"!=o||(a="leading"in n?!!n.leading:a,u="trailing"in n?!!n.trailing:u)),i(e,t,{leading:a,maxWait:+t,trailing:u})}},7321:function(e,t,n){var i=n(7322),r="Expected a function",s=Math.max,o=i(Date,"now")||function(){return(new Date).getTime()};e.exports=function(e,t,n){var i,a,u,l,d,c,h,f,p,m=0,g=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);if(t=t<0?0:+t||0,!0===n){var b=!0;v=!1}else p=typeof(f=n),!f||"object"!=p&&"function"!=p||(b=!!n.leading,g="maxWait"in n&&s(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);function y(t,n){n&&clearTimeout(n),a=c=h=void 0,t&&(m=o(),u=e.apply(d,i),c||a||(i=d=void 0))}function w(){var e=t-(o()-l);e<=0||e>t?y(h,a):c=setTimeout(w,e)}function x(){y(v,c)}function M(){if(i=arguments,l=o(),d=this,h=v&&(c||!b),!1===g)var n=b&&!c;else{a||b||(m=l);var r=g-(l-m),s=r<=0||r>g;s?(a&&(a=clearTimeout(a)),m=l,u=e.apply(d,i)):a||(a=setTimeout(x,r))}return s&&c?c=clearTimeout(c):c||t===g||(c=setTimeout(w,t)),n&&(s=!0,u=e.apply(d,i)),!s||c||a||(i=d=void 0),u}return M.cancel=function(){c&&clearTimeout(c),a&&clearTimeout(a),m=0,a=c=h=void 0},M}},7322:function(e,t){var n="[object Function]",i=/^\[object .+?Constructor\]$/;var r=Object.prototype,s=Function.prototype.toString,o=r.hasOwnProperty,a=r.toString,u=RegExp("^"+s.call(o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e,t){var r=null==e?void 0:e[t];return function(e){if(null==e)return!1;if(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&a.call(e)==n}(e))return u.test(s.call(e));return function(e){return!!e&&"object"==typeof e}(e)&&i.test(e)}(r)?r:void 0}},7323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e).then((function(t){var n=(0,r.default)(e.type,t);return"binary"===n||"image"===n}))};var i=s(n(5480)),r=s(n(5479));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(6)),r=s(n(53));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.ItemView.extend({template:"#snippet-permissions-template",className:"snippet-permissions",events:{'change input[name="permissions"]':"updatePermissions"},modelEvents:{"change:owner":"render"},updatePermissions:function(e){this.model.set("is_private","private"===(0,i.default)(e.target).val())},val:function(){this.select&&this.select.val()}}),e.exports=t.default},7325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(53)),r=a(n(7326)),s=a(n(7329)),o=a(n(7333));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.get("size");return t&&t>512e3}t.default=i.default.CollectionView.extend({collectionEvents:{"change:closed":function(e,t){this.children.findByModel(e).destroy()}},filter:function(e){return!e.get("closed")},getChildView:function(e){return"image"===e.category()?o.default:"binary"===e.category()?r.default:u(e)?r.default:s.default},childViewOptions:function(e){return"binary"===e.category()?{text:gettext("Binary file")}:u(e)?{text:gettext("This file is too large to edit online")}:void 0}}),e.exports=t.default},7326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(36)),r=o(n(53)),s=o(n(5014));function o(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.extend({template:!1,className:function(){var e=s.default.prototype.className.apply(this,arguments);return[e,"editor-stub"].join(" ")},initialize:function(e){s.default.prototype.initialize.apply(this,arguments),this.container.body=new r.default.ItemView({template:"#stub-viewer-template",model:new i.default.Model({text:e.text})})}}),e.exports=t.default},7327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(53),s=(i=r)&&i.__esModule?i:{default:i};function o(e){return e&&e.length?e:e?[e]:[]}function a(e){return e.map((function(e){return e.render().$el}))}t.default=s.default.ItemView.extend({template:"#bb-content-container-template",className:"bb-content-container",ui:{header:".bb-content-container-header",footer:".bb-content-container-footer",headerPrimary:".bb-content-container-header-primary",headerSecondary:".bb-content-container-header-secondary",body:".bb-content-container-body",footerPrimary:".bb-content-container-footer-primary",footerSecondary:".bb-content-container-footer-secondary"},initialize:function(e){this.header={primary:o(e.header&&e.header.primary),secondary:o(e.header&&e.header.secondary)},this.body=o(e.body),this.footer={primary:o(e.footer&&e.footer.primary),secondary:o(e.footer&&e.footer.secondary)}},templateHelpers:function(){return{hasHeader:this.header.primary.length||this.header.secondary.length,hasFooter:this.footer.primary.length||this.footer.secondary.length}},onRender:function(){this.ui.headerPrimary.append(a(this.header.primary)),this.ui.headerSecondary.append(a(this.header.secondary)),this.ui.body.append(a(this.body)),this.ui.footerPrimary.append(a(this.footer.primary)),this.ui.footerSecondary.append(a(this.footer.secondary))}}),e.exports=t.default},7328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(6)),r=o(n(53)),s=o(n(20));function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.ItemView.extend({template:"#code-editor-path-view-template",className:"code-editor-path-view",modelEvents:{"change:path":"updateInput"},events:{"input @ui.input":"updatePath"},ui:{input:".code-editor-path-view-input"},updatePath:s.default.debounce((function(e){this.model.set("path",(0,i.default)(e.target).val())}),100),updateInput:function(e,t){t!==this.ui.input.val()&&this.ui.input.val(t)}}),e.exports=t.default},7329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(20)),r=d(n(7330)),s=d(n(5484)),o=d(n(7331)),a=d(n(5014)),u=d(n(4601)),l=d(n(7332));function d(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend({template:!1,className:function(){var e=a.default.prototype.className.apply(this,arguments);return[e,"snippets-code-editor"].join(" ")},modelEvents:{"change:path":"updateMode"},initialize:function(){var e;a.default.prototype.initialize.apply(this,arguments),this.editorSettings=s.default.fromFile(this.model),this.listenTo(this.editorSettings,"change:syntaxMode",this.onSyntaxChange),this.editor=new r.default({model:this.model,settings:this.editorSettings,cmOptions:{dragDrop:!1,lineWrapping:!0}}),e=new o.default({className:[o.default.prototype.className,"bb-content-container-item"].join(" "),model:this.editorSettings}),this.container.header.primary.push(e),this.container.body=this.editor},updateMode:function(e,t){var n;null!=t&&((n=""===t?u.default.findModeByMIME("text/plain"):u.default.findModeByFileName(t))&&this.editorSettings.set("syntaxMode",n))},onSyntaxChange:function(e,t){if(t){this.model.set("type",t.mime);var n=this.model.get("path"),r=l.default.extname(n);n&&t.ext&&!i.default.contains(t.ext,r)&&this.model.set("path",this._adaptPathForExt(n,t.ext[0]))}},_adaptPathForExt:function(e,t){return e.match(/[\/\\]$/)?this.model.collection.getNextName(e+"snippet",t):l.default.extchange(e,t)},onRender:function(){a.default.prototype.onRender.apply(this,arguments);var e=this.model.isEmpty();this.editor.onDomRefresh(e)}}),e.exports=t.default},7330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(53)),r=d(n(20)),s=d(n(5481)),o=d(n(5482)),a=d(n(5483)),u=d(n(5484)),l=d(n(4601));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){return"spaces"!==e}function h(e){return function(){e.call(this,arguments[1])}}t.default=i.default.ItemView.extend({template:!1,className:function(){var e=["code-editor"];return this.hasRendered||e.push("maskable","has-mask"),this.isDisabled&&e.push("disabled"),e.join(" ")},initialize:function(e){this.settings=e.settings||u.default.fromFile(this.model),this.cmOptions=e.cmOptions,this.updateCMIndentMode(this.settings.get("indentMode")),this.updateCMSyntaxMode(this.settings.get("syntaxMode")),this.updateCMIndentUnit(this.settings.indentUnit()),this.listenTo(this.settings,"change:indentMode",h(this.updateCMIndentMode.bind(this))),this.listenTo(this.settings,"change:syntaxMode",h(this.updateCMSyntaxMode.bind(this))),this.listenTo(this.settings,"change:syntaxMode",h(this.trigger.bind(this,"change:syntaxMode"))),this.listenTo(this.settings,"change:indentMode change:indentSize",(function(){this.updateCMIndentUnit(this.settings.indentUnit())})),this.originalContent=this.model.toText(),this.on("change:contents",r.default.debounce((function(e){this.model.setText(e)}),250))},setClasses:function(){this.$el.attr("class",this.className())},onRender:function(){this.editor=(0,l.default)(this.el,r.default.extend({theme:"trac",value:this.model.toText(),mode:this.settings.get("syntaxMode").mime,indentWithTabs:c(this.settings.get("indentMode")),indentUnit:this.settings.indentUnit(),smartIndent:!1,placeholder:gettext("Drag a file or paste a snippet of code"),lineNumbers:!0,extraKeys:{Backspace:o.default,Tab:a.default}},this.cmOptions)),this.editor.on("change",function(){this.trigger("change:contents",this.editor.getValue(this.settings.get("lineEnding")))}.bind(this)),this.hasRendered=!0,this.setClasses()},onDomRefresh:function(e){r.default.defer(function(){this.editor&&this.editor.refresh(),e&&this.editor&&this.focus()}.bind(this))},getContent:function(){return this.editor.getValue(this.settings.get("lineEnding"))},resetContent:function(){this.editor.setValue(this.originalContent)},contentHasChanged:function(){return this.getContent()!==this.originalContent},refresh:function(){return this.editor.refresh(),this},focus:function(){return this.editor.focus(),this},disable:function(){return this.isDisabled=!0,this.editor.setOption("readOnly",!0),this.setClasses(),this},enable:function(){return this.isDisabled=!1,this.editor.setOption("readOnly",!1),this.setClasses(),this},updateCMSyntaxMode:function(e){(0,s.default)(e).then(function(){this.hasRendered&&this.editor.setOption("mode",e.mime)}.bind(this))},updateCMIndentMode:function(e){this.hasRendered&&this.editor.setOption(c(e))},updateCMIndentUnit:function(e){this.hasRendered&&this.editor.setOption("indentUnit",e)}}),e.exports=t.default},7331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(6)),r=u(n(53)),s=u(n(20)),o=u(n(4539)),a=u(n(4601));function u(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.ItemView.extend({template:"#code-editor-syntax-picker-template",className:"code-editor-syntax-picker",templateHelpers:{modes:s.default.sortBy(o.default,(function(e){return e.name.toLowerCase()}))},ui:{syntaxMode:".syntax-mode",indentMode:".indent-mode"},modelEvents:{"change:syntaxMode":"setDropdowns"},events:{"change @ui.syntaxMode":"changeSyntaxMode","change @ui.indentMode":"changeIndentMode"},onRender:function(){this.setDropdowns(),this.auifyDropdowns()},setDropdowns:function(){this.ui.syntaxMode.val(this.model.get("syntaxMode").mime).trigger("change"),"tabs"===this.model.get("indentMode")?this.ui.indentMode.val("tabs"):this.ui.indentMode.val(this.model.get("indentSize"))},auifyDropdowns:function(){this.ui.syntaxMode.auiSelect2({containerCssClass:"aui-select2-subtle-outline"}),this.ui.indentMode.auiSelect2({containerCssClass:"aui-select2-subtle-outline",minimumResultsForSearch:-1})},changeSyntaxMode:function(e){var t=a.default.findModeByMIME((0,i.default)(e.target).val());t&&this.model.set("syntaxMode",t)},changeIndentMode:function(e){var t=(0,i.default)(e.target).val();"tabs"===t?this.model.set("indentMode",t):(this.model.set("indentMode","spaces"),this.model.set("indentSize",parseInt(t,10)))}}),e.exports=t.default},7332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={extname:function(e,t){if(e){var n=e.split(".");return n.length>1?n.pop():""}},extchange:function(e){var t=[].slice.call(arguments,1);if(!e)return"";var n=e.split(".");return n.length>1&&n.pop(),n.concat(t).join(".")}},e.exports=t.default},7333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(7334)),r=s(n(5014));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.extend({template:!1,className:function(){var e=r.default.prototype.className.apply(this,arguments);return[e,"snippets-image-editor"].join(" ")},initialize:function(){r.default.prototype.initialize.apply(this,arguments),this.imageViewer=new i.default({src:this.model.toURL()}),this.container.body=this.imageViewer}}),e.exports=t.default},7334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(53),s=(i=r)&&i.__esModule?i:{default:i};t.default=s.default.ItemView.extend({className:"image-viewer",template:"#image-viewer-template",initialize:function(e){this.src=e.src},templateHelpers:function(){return{src:this.src}}}),e.exports=t.default},7336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(36)),r=c(n(6)),s=c(n(5481)),o=c(n(5015)),a=c(n(5485)),u=c(n(5482)),l=c(n(5483)),d=c(n(4601));function c(e){return e&&e.__esModule?e:{default:e}}n(7337),t.default=i.default.View.extend({initialize:function(e){var t=e.source.slice(0,8192),n=(0,a.default)(t),i=(0,o.default)(e.path);this.lineEnding=n.lineEnding,this.editor=d.default.fromTextArea(this.el,{theme:"trac",mode:i.mime,indentWithTabs:"tabs"===n.indentMode,indentUnit:"spaces"===n.indentMode?n.indentSize:4,smartIndent:!1,lineNumbers:!0,gutters:["diff-gutter"],extraKeys:{Backspace:u.default,Tab:l.default,"Shift-Ctrl-N":"prevHunk","Ctrl-N":"nextHunk"}}),this.updateMode(i.mime),e.height&&this.editor.setSize(null,e.height),this.editor.setValue(e.source),this.originalContent=this.getContent()},getContent:function(){return this.editor.getValue(this.lineEnding)},resetContent:function(){this.editor.setValue(this.originalContent)},contentHasChanged:function(){return this.getContent()!==this.originalContent},contentIsValid:function(){return!0},updateMode:function(e){var t=d.default.findModeByMIME(e);(0,s.default)(t).then(function(){this.editor.setOption("mode",t.mime)}.bind(this))},remove:function(){},refresh:function(){return this.editor.refresh(),this},focus:function(){return this.editor.focus(),this},disable:function(){return(0,r.default)(this.editor.getWrapperElement()).addClass("disabled"),this.editor.setOption("readOnly",!0),this},enable:function(){return(0,r.default)(this.editor.getWrapperElement()).removeClass("disabled"),this.editor.setOption("readOnly",!1),this},showDiff:function(e,t){void 0!==this.editor.showDiff&&this.editor.showDiff(e,t)},getPrevHunk:function(){return this.editor._prevHunk()},getNextHunk:function(){return this.editor._nextHunk()},nextHunk:function(){null!==d.default.commands.nextHunk&&d.default.commands.nextHunk(this.editor)},prevHunk:function(){null!==d.default.commands.prevHunk&&d.default.commands.prevHunk(this.editor)},getCurrentHunk:function(){return this.editor._currentHunk()},onViewportChange:function(e){this.editor.on("viewportChange",e)},onCursorActivity:function(e){this.editor.on("cursorActivity",e)},onChange:function(e){this.editor.on("change",e)},setCursor:function(e){this.editor.setCursor(e)},getOption:function(e){return this.editor.getOption(e)},setOption:function(e,t){this.editor.setOption(e,t)}}),e.exports=t.default},7337:function(e,t,n){"use strict";var i=s(n(4601)),r=s(n(20));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i;for(i=e;i<=t;i++)this.removeLineClass(i,"background",n),this.setGutterMarker(i,"diff-gutter",void 0)}function a(e,t,n,i){var r,s=!1;do{var a=e.splice(0,e.length),u=i.text.length-i.removed.length,l=i.from.line,d=i.to.line;for(r=0;r<a.length;r++){var c=a[r],h=c.line,f=c.end_line;h<=l&&f>=d||h<=d&&f>=d?(n.operation(o.bind(n,c.line,c.end_line,c.markerClass)),s=!0):h>l?(c.line+=u,c.end_line+=u,e.push(c)):e.push(c)}i=i.next}while(i);s&&t&&t()}function u(e){var t,n=this.getCursor().line,i={line:null,index:null,total:e.length};for(t=0;t<e.length;t++)if(null===i.line&&e[t].line>n){i.line=e[t].line,i.index=t;break}return i}function l(e){var t,n=this.getCursor().line,i={line:null,index:null,total:e.length};for(t=e.length-1;t>=0;t--)if(null===i.line&&e[t].line<n){i.line=e[t].line,i.index=t;break}return i}function d(e){var t,n=this.getCursor().line,i={line:null,index:null,total:e.length};for(t=0;t<e.length;t++)if(e[t].line<=n&&n<=e[t].end_line){i.line=e[t].line,i.index=t;break}return i}i.default.commands.nextHunk=function(e){var t,n=e._nextHunk();null!==n.line&&(t=e.getScrollInfo().clientHeight/3,e.scrollIntoView({line:n.line,ch:0},t),e.getDoc().setCursor(n.line,0),e.focus())},i.default.commands.prevHunk=function(e){var t,n=e._prevHunk();null!==n.line&&(t=e.getScrollInfo().clientHeight/3,e.scrollIntoView({line:n.line,ch:0},t),e.getDoc().setCursor(n.line,0),e.focus())},i.default.defineExtension("showDiff",(function(e,t){var n=[];r.default.each(e.hunks,function(e){e.to_count>0&&n.push(function(e,t){var n,i=t.to_start-1,r=t.to_end-1,s=t.to_count,o="CodeMirror-diff-change";for(0===t.from_lines.length&&(o="CodeMirror-diff-add"),n=i;n<=r;n++){e.addLineClass(n,"background",o);var a=document.createElement("span");a.className="CodeMirror-diff-gutter",a.innerHTML="+",e.setGutterMarker(n,"diff-gutter",a)}return{line:i,end_line:r,count:s,markerClass:o,hunk:i}}(this,e))}.bind(this)),this._nextHunk=u.bind(this,n),this._prevHunk=l.bind(this,n),this._currentHunk=d.bind(this,n),this.on("change",a.bind(this,n,t)),this.refresh()}))},7338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(36)),r=o(n(6)),s=o(n(284));function o(e){return e&&e.__esModule?e:{default:e}}function a(){}t.default=i.default.View.extend({initialize:function(e){var t=e.editorModules[0],n={moduleKey:t,productContext:{encContext:(0,r.default)(".enc-context[data-for-key="+t+"]").data("enc-context")}};this.editorId=null,this.originalContent=e.source,this.source=""+e.source,this.hostOptions={},this.isValid=!0,this.rpcPromise=new Promise(function(e){var t=!1;s.default.extend({init:function(n,i){t||n.ns!==this.editorId||(t=!0,i.editor.registerSourceGetter(function(){return this.originalContent}.bind(this)),i.editor.addListener("change",function(e,t){this.source=e,t&&(this.isValid=t.isValid)}.bind(this)),i.editor.addListener("load",(function(){e(i)})))}.bind(this)})}.bind(this)),window._AP.contentResolver.resolveByParameters(n).then(function(e){this.el=(0,r.default)(e).replaceAll(this.el).get(0),this.editorId=(0,r.default)(this.el).find(".ap-container").attr("id").slice(3)}.bind(this))},getContent:function(){return this.source},resetContent:function(){this.source=this.originalContent,this.rpcPromise.then(function(e){e.editor.emit("reset",this.source)}.bind(this))},contentHasChanged:function(){return this.source!==this.originalContent},contentIsValid:function(){return this.isValid},refresh:function(){return this.rpcPromise.then((function(e){e.editor.emit("refresh")})),this},focus:function(){return this.rpcPromise.then((function(e){e.editor.emit("focus")})),this},disable:function(){return this.rpcPromise.then((function(e){e.editor.emit("disable")})),this},enable:function(){return this.rpcPromise.then((function(e){e.editor.emit("enable")})),this},onChange:function(e){this.rpcPromise.then((function(t){t.editor.addListener("change",e)}))},remove:function(){this.rpcPromise.then((function(e){e.editor.removeAllListeners()}))},updateMode:a,setCursor:a,showDiff:a,getPrevHunk:a,getNextHunk:a,nextHunk:a,prevHunk:a,getCurrentHunk:a,onViewportChange:a,onCursorActivity:a,getOption:a,setOption:a}),e.exports=t.default},7339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(36)),r=u(n(0)),s=n(42),o=u(n(7340)),a=u(n(2054));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){};t.default=i.default.View.extend({initialize:function(e){(0,a.default)(),this.editorId=null,this.originalContent=e.source,this.source=""+e.source,this.hostOptions={},this.isValid=!0,this.changeEvent=null;var t=this.$el.parent();t.empty(),(0,s.render)(r.default.createElement(o.default,{source:this.source,onChange:this.changeContent.bind(this),onReset:this.resetContent.bind(this)}),t[0])},getContent:function(){return this.source},resetContent:function(){this.source=this.originalContent,"function"==typeof this.changeEvent&&this.changeEvent(this.source)},changeContent:function(e){this.source=e,"function"==typeof this.changeEvent&&this.changeEvent(e)},contentHasChanged:function(){return this.source!==this.originalContent},contentIsValid:function(){return this.isValid},onChange:function(e){this.changeEvent=e},refresh:l,focus:l,disable:l,enable:l,remove:l,updateMode:l,setCursor:l,showDiff:l,getPrevHunk:l,getNextHunk:l,nextHunk:l,prevHunk:l,getCurrentHunk:l,onViewportChange:l,onCursorActivity:l,getOption:l,setOption:l}),e.exports=t.default},7340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),s=n(188),o=a(n(225));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=i=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.state={source:i.props.source},u(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.source,i=t.onChange,a=t.onReset,u=this.state.source;return r.default.createElement(o.default,null,r.default.createElement(s.FileEditor,{source:u,onChange:function(t){e.setState({source:t}),"function"==typeof i&&i(t)},onReset:function(){e.setState({source:n}),"function"==typeof a&&a(n)},defaultStyles:{minHeight:"calc(100vh - 300px)",width:"100%"}}))}}]),t}(r.default.PureComponent);t.default=l,e.exports=t.default},7341:function(e,t,n){var i={"./apl/apl.js":7342,"./asciiarmor/asciiarmor.js":7343,"./asn.1/asn.1.js":7344,"./asterisk/asterisk.js":7345,"./brainfuck/brainfuck.js":7346,"./clike/clike.js":5016,"./clojure/clojure.js":7347,"./cmake/cmake.js":7348,"./cobol/cobol.js":7349,"./coffeescript/coffeescript.js":5486,"./commonlisp/commonlisp.js":7350,"./crystal/crystal.js":7351,"./css/css.js":4744,"./cypher/cypher.js":7352,"./d/d.js":7353,"./dart/dart.js":7354,"./diff/diff.js":7355,"./django/django.js":7356,"./dockerfile/dockerfile.js":7357,"./dtd/dtd.js":7358,"./dylan/dylan.js":7359,"./ebnf/ebnf.js":7360,"./ecl/ecl.js":7361,"./eiffel/eiffel.js":7362,"./elm/elm.js":7363,"./erlang/erlang.js":7364,"./factor/factor.js":7365,"./fcl/fcl.js":7366,"./forth/forth.js":7367,"./fortran/fortran.js":7368,"./gas/gas.js":7369,"./gfm/gfm.js":7370,"./gherkin/gherkin.js":7371,"./go/go.js":7372,"./groovy/groovy.js":7373,"./haml/haml.js":7374,"./handlebars/handlebars.js":5488,"./haskell-literate/haskell-literate.js":7375,"./haskell/haskell.js":5489,"./haxe/haxe.js":7376,"./htmlembedded/htmlembedded.js":7377,"./htmlmixed/htmlmixed.js":4624,"./http/http.js":7378,"./idl/idl.js":7379,"./javascript/javascript.js":4681,"./jinja2/jinja2.js":7380,"./jsx/jsx.js":7381,"./julia/julia.js":7382,"./livescript/livescript.js":7383,"./lua/lua.js":7384,"./markdown/markdown.js":5487,"./mathematica/mathematica.js":7385,"./mbox/mbox.js":7386,"./meta.js":5e3,"./mirc/mirc.js":7387,"./mllike/mllike.js":7388,"./modelica/modelica.js":7389,"./mscgen/mscgen.js":7390,"./mumps/mumps.js":7391,"./nginx/nginx.js":7392,"./nsis/nsis.js":7393,"./ntriples/ntriples.js":7394,"./octave/octave.js":7395,"./oz/oz.js":7396,"./pascal/pascal.js":7397,"./pegjs/pegjs.js":7398,"./perl/perl.js":7399,"./php/php.js":7400,"./pig/pig.js":7401,"./powershell/powershell.js":7402,"./properties/properties.js":7403,"./protobuf/protobuf.js":7404,"./pug/pug.js":5490,"./puppet/puppet.js":7405,"./python/python.js":5491,"./q/q.js":7406,"./r/r.js":7407,"./rpm/rpm.js":7408,"./rst/rst.js":7409,"./ruby/ruby.js":5017,"./rust/rust.js":7410,"./sas/sas.js":7411,"./sass/sass.js":5493,"./scheme/scheme.js":7412,"./shell/shell.js":7413,"./sieve/sieve.js":7414,"./slim/slim.js":7415,"./smalltalk/smalltalk.js":7416,"./smarty/smarty.js":7417,"./solr/solr.js":7418,"./soy/soy.js":7419,"./sparql/sparql.js":7420,"./spreadsheet/spreadsheet.js":7421,"./sql/sql.js":7422,"./stex/stex.js":5492,"./stylus/stylus.js":5494,"./swift/swift.js":7423,"./tcl/tcl.js":7424,"./textile/textile.js":7425,"./tiddlywiki/tiddlywiki.js":7426,"./tiki/tiki.js":7427,"./toml/toml.js":7428,"./tornado/tornado.js":7429,"./troff/troff.js":7430,"./ttcn-cfg/ttcn-cfg.js":7431,"./ttcn/ttcn.js":7432,"./turtle/turtle.js":7433,"./twig/twig.js":7434,"./vb/vb.js":7435,"./vbscript/vbscript.js":7436,"./velocity/velocity.js":7437,"./verilog/verilog.js":7438,"./vhdl/vhdl.js":7439,"./vue/vue.js":7440,"./webidl/webidl.js":7441,"./xml/xml.js":4745,"./xquery/xquery.js":7442,"./yacas/yacas.js":7443,"./yaml-frontmatter/yaml-frontmatter.js":7444,"./yaml/yaml.js":5495,"./z80/z80.js":7445};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=7341}}]);